---
import type { CollectionEntry } from "astro:content";
export interface Props {
  project: CollectionEntry<"projects">;
}

import PostLayout from "@layouts/PostLayout.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  let projects = await getCollection(
    "projects",
    (project) =>
      (project.data.published && project.body) || import.meta.env.DEV,
  );
  return projects.map((project) => ({
    params: { slug: project.slug },
    props: { project },
  }));
}

const { project } = Astro.props;
const { Content } = await project.render();
---

<PostLayout post={project}>
  <Content />
</PostLayout>
